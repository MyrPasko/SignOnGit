!function(){"use strict";angular.module("app",["ui.router","ngMaterial","base64"]).run(function(){console.log("App is running.")})}(),function(){"use strict";function e(e,o){o.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"layout/login/login.html",controller:"LoginController",controllerAs:"vm"}).state("repositories",{url:"/repositories",templateUrl:"layout/repositories/repositories.html",controller:"RepositoriesController",controllerAs:"vm",params:{userName:null,basic:null,id:null,token:null},resolve:{userRepos:["$stateParams","http",function(e,o){return e.userName?o.getRepoByUserName(e.userName,e.token):(console.log(e),"")}]}}).state("reports",{url:"/reports",templateUrl:"layout/reports/reports.html",controller:"ReportsController",controllerAs:"vm",params:{userName:null,repoName:null,basic:null,id:null,token:null},resolve:{issues:["$stateParams","http",function(e,o){return o.getIssuesByRepoName(e.userName,e.repoName,e.token)}],commits:["$stateParams","http",function(e,o){return o.getCommitsByRepoName(e.userName,e.repoName,e.token)}]}})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(s){var a="https://api.github.com";return{getRepoByUserName:function(e,o){var t=a+"/users/"+e+"/repos",n={method:"GET",headers:{Authorization:o,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},params:{type:"all",per_page:"200"}};return s.get(t,n)},getCommitsByRepoName:function(e,o,t){var n=a+"/repos/"+e+"/"+o+"/commits",r={method:"GET",headers:{Authorization:t,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},params:{per_page:"200"}};return s.get(n,r)},getIssuesByRepoName:function(e,o,t){var n=a+"/repos/"+e+"/"+o+"/issues",r={method:"GET",headers:{Authorization:t,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}};return s.get(n,r)},getAuthorization:function(e){var o={method:"GET",headers:{Authorization:e,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}};return s.get("https://api.github.com/authorizations",o)},deleteAuthorization:function(e,o){var t=a+"/authorizations/"+o,n={method:"DELETE",headers:{Authorization:e,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}};return-1!==o?s.delete(t,n):void 0},postAuthorization:function(e,o){var t={scopes:["public_repo"],note:o},n={method:"POST",headers:{Authorization:e,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}};return s.post("https://api.github.com/authorizations",t,n)}}}angular.module("app").factory("http",e),e.$inject=["$http"]}(),function(){"use strict";function e(t,o,n,e){var r=this;r.user={},r.login=function(){var o="basic "+e.encode(r.user.login+":"+r.user.password);if(console.log(o),r.form.$invalid)return;n.getAuthorization(o).then(function(e){var o=r.checkArray(e.data,r.note);return console.log(o),console.log(e.data),o},function(e){console.error(e),r.showMessage("Wrong login or password.")}).then(function(e){return n.deleteAuthorization(o,e)}).then(function(){return n.postAuthorization(o,r.note)}).then(function(e){console.log(e),console.log("Go to repositories."),t.go("repositories",{basic:o,id:e.data.id,token:"token "+e.data.token})}).catch(function(e){console.log(e)})},r.showMessage=function(e){r.message=e,o(function(){r.message=""},5e3)},r.checkArray=function(e,o){var t=-1;return e.forEach(function(e){e.note===o&&(t=e.id)}),console.log(t),t},r.note="Sing-on app by MyrPasko"}angular.module("app").controller("LoginController",e),e.$inject=["$state","$timeout","http","$base64"]}(),function(){"use strict";function e(t,e,o,n,r){var s=this;s.chooseRepo=function(e){var o={userName:e.owner.login,repoName:e.name,basic:n.basic,id:n.id,token:n.token};console.log("Go to reports"),t.go("reports",o)},s.getRepos=function(){e.getRepoByUserName(s.searchField,n.token).then(function(e){s.listOfRepos=e.data,s.userName=s.searchField,s.searchField=""},function(e){console.log(e),s.listOfRepos="",s.showMessage("User was not found.")})},s.listOfRepos=o.data||"",s.logOut=function(){e.deleteAuthorization(n.basic,n.id).then(function(e){console.log(e),t.go("login")})},s.searchField="",s.showMessage=function(e){s.message=e,r(function(){s.message=""},5e3)},s.sortparam="name",s.userName=n.userName||""}angular.module("app").controller("RepositoriesController",e),e.$inject=["$state","http","userRepos","$stateParams","$timeout"]}(),function(){"use strict";function e(o,e,t,n,r){var s=this;s.checkBox={commits:{committer:!0,date:!0,description:!0},issues:{name:!0,user:!0,date:!0,status:!0}},s.commits=t.data,s.commitsSortParam="commit.author.name",s.goToRepos=function(){var e={userName:n.userName,basic:n.basic,id:n.id,token:n.token};console.log("Go back to repositories."),o.go("repositories",e)},s.issues=e.data,s.issuesSortParam="title",s.logOut=function(){r.deleteAuthorization(n.basic,n.id).then(function(e){console.log(e),o.go("login")})},s.makeInvisible=function(e){return e?"visible":"invisible"},s.repoName=n.repoName}angular.module("app").controller("ReportsController",e),e.$inject=["$state","issues","commits","$stateParams","http"]}();